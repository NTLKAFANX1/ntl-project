
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Ø¨ÙˆØª Ù…Ø¨Ø±Ù…Ø¬ Ø°ÙƒÙŠ</title>
  <style>
    body { background-color: #111; color: #fff; font-family: sans-serif; padding: 20px; }
    #chat { max-width: 800px; margin: auto; margin-bottom: 30px; }
    .msg { margin: 10px 0; padding: 10px; border-radius: 5px; }
    .user { background-color: #333; text-align: right; }
    .bot { background-color: #222; text-align: left; white-space: pre-wrap; }
    input, button, select, textarea { padding: 10px; border-radius: 5px; border: none; margin-top: 10px; width: 100%; box-sizing: border-box; }
    button { background-color: #00ff99; color: #000; cursor: pointer; margin-bottom: 10px; }
    textarea { height: 150px; background: #222; color: #0f0; font-family: monospace; }
  </style>
</head>
<body>
  <div id="chat">
    <div class="msg bot">ğŸ¤– Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ! Ø§Ø³Ø£Ù„ Ø¹Ù† Ø£ÙŠ ÙƒÙˆØ¯ Ø£Ùˆ Ø¹Ø¯Ù‘Ù„ Ø£ÙŠ Ù…Ù„Ù ÙÙŠ Ø§Ù„Ø¨ÙˆØª.</div>
  </div>
  <input type="text" id="input" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ø£Ùˆ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨...">
  <button onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>

  <h3>ğŸ“‚ Ù…Ù„ÙØ§Øª Ø§Ù„Ø¨ÙˆØª:</h3>
  <select id="fileSelect" onchange="loadFile()">
    <option value="">-- Ø§Ø®ØªØ± Ù…Ù„Ù --</option>
    <option value="server.js">server.js</option>
    <option value="package.json">package.json</option>
    <option value="public/index.html">public/index.html</option>
  </select>
  <textarea id="fileContent" placeholder="Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù„Ù Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§..."></textarea>
  <button onclick="saveFile()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>

  <script>
    async function send() {
      const input = document.getElementById('input');
      const chat = document.getElementById('chat');
      const text = input.value;
      if (!text) return;

      const userMsg = document.createElement('div');
      userMsg.className = 'msg user';
      userMsg.innerText = 'ğŸ§‘â€ğŸ’» ' + text;
      chat.appendChild(userMsg);
      input.value = '';

      const response = await fetch('/ai', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ prompt: text })
      });
      const data = await response.json();

      const botMsg = document.createElement('div');
      botMsg.className = 'msg bot';
      botMsg.innerText = 'ğŸ¤– ' + data.message;
      chat.appendChild(botMsg);

      chat.scrollTop = chat.scrollHeight;
    }

    async function loadFile() {
      const file = document.getElementById('fileSelect').value;
      if (!file) return;
      const res = await fetch(`/file?name=${file}`);
      const data = await res.text();
      document.getElementById('fileContent').value = data;
    }

    async function saveFile() {
      const file = document.getElementById('fileSelect').value;
      const content = document.getElementById('fileContent').value;
      if (!file) return alert('Ø§Ø®ØªØ± Ù…Ù„Ù Ø£ÙˆÙ„Ø§Ù‹!');
      const res = await fetch('/file', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name: file, content })
      });
      const data = await res.json();
      alert(data.message);
    }
  </script>
</body>
</html>
