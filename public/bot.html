<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bot Editor</title>
<style>
body { font-family: Arial; background:#121212; color:#fff; }
header { display:flex; justify-content:space-between; align-items:center; padding:10px; border-bottom:1px solid #444; }
textarea { width:100%; height:300px; background:#1e1e1e; color:#fff; border:none; padding:10px; border-radius:5px; }
button { padding:5px 10px; border:none; border-radius:5px; cursor:pointer; background:#3a3a3a; color:#fff; }
button:hover { background:#555; }
#console { margin-top:10px; background:#222; padding:10px; border-radius:5px; height:150px; overflow:auto; }
</style>
</head>
<body>
<header>
    <h1 id="botTitle">Bot</h1>
    <button onclick="saveCode()">ðŸ’¾ Save</button>
</header>

<input type="text" id="fileName" placeholder="File name"><br><br>
<textarea id="botCode" placeholder="// Write your bot code here"></textarea>
<div id="console"></div>

<script>
const params = new URLSearchParams(window.location.search);
const botName = params.get("name");
document.getElementById("botTitle").innerText = botName;

function saveCode(){
    const code = document.getElementById("botCode").value;
    fetch("/save-bot-code", { method:"POST", headers:{"Content-Type":"application/json"}, body: JSON.stringify({name:botName, code})})
    .then(res => res.json())
    .then(data => {
        if(data.success){
            addConsole("Code saved and executed!");
        } else {
            addConsole("Error: " + JSON.stringify(data));
        }
    });
}

function addConsole(text){
    const c = document.getElementById("console");
    c.innerHTML += text + "\n";
    c.scrollTop = c.scrollHeight;
}
</script>
</body>
</html>
